!function(){"use strict";var e,o,n;e=$(window),o=$(document),$("body"),n="threemonkeys.io"==location.hostname?"https://api.threemonkeys.io":"https://dev.threemonkeys.io",o.ready(function(){function o(e){const o="=".repeat((4-e.length%4)%4),n=(e+o).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(n),s=new Uint8Array(t.length);for(var i=0;i<t.length;++i)s[i]=t.charCodeAt(i);return s}function t(){"denied"===Notification.permission&&(p.disabled=!0),g?(a.innerHTML=h,a.classList.remove("btn-theme-color"),a.classList.add("btn-dark-border"),p.checked=!0,u.addClass("hidden")):(a.innerHTML=b,a.classList.add("btn-theme-color"),a.classList.remove("btn-dark-border"),u.removeClass("hidden"),d.classList.add("close-follow")),m?d.classList.remove("close-follow"):d.classList.add("close-follow")}function s(){w&&w.pushManager.getSubscription().then(function(e){g=!(null===e),t()}),p.addEventListener("change",function(e){e.preventDefault(),e.stopPropagation(),this.checked?i():r()}),f.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),m=!1,t()}),a.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),g||v?(m=!0,t()):i()}),u.click(function(e){e.preventDefault(),v?(m=!0,t()):i()}),t()}function i(){const e=o(l);w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e}).then(function(e){c(e),g=!0,t()}).catch(function(e){t()})}function r(){w.pushManager.getSubscription().then(function(e){e&&(c(e),e.unsubscribe()),console.log("You are unsubscribed."),g=!1,t()}).catch(function(e){console.error("Error unsubscribing",e)})}function c(e){const o=1==g?"unfollow":"follow";fetch(n+"/subscription/"+o,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({subscription:e})})}"object"==typeof smoothScroll&&smoothScroll.init();const l="BMRzWJycASmk8zIwe4_7yM9WaT8BbHr2Db52zHxDl4V2cXDIo5WOf1juJBgVJ-AyP5vWqfmo26FNOIKru-SJR8U",a=document.querySelector(".follow-button"),u=$(".follow-button-bottom"),d=document.querySelector(".follow-button-popup-wrapper"),f=(document.querySelector(".follow-button-popup"),document.querySelector(".close-icon")),p=document.querySelector("#web-notifications"),b='<i class="large-icon fas fa-bell"></i>FOLLOW <i class="fas fa-chevron-down"></i>',h='<i class="large-icon fas fa-bell"></i>Following <i class="fas fa-chevron-down"></i>';var g=!1,v=!1,m=!1,w=null;e.on("scroll",function(){e.scrollTop()>450?u.addClass("visible"):u.removeClass("visible")}),"serviceWorker"in navigator&&"PushManager"in window?navigator.serviceWorker.register("/sw.js").then(function(e){w=e,s()}).catch(function(e){console.error("Service Worker Error",e),p.disabled=!0,v=!0}):(console.warn("Push messaging is not supported."),p.disabled=!0,v=!0,s())})}(jQuery);